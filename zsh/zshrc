# uncomment to profile zsh
# zmodload zsh/zprof

export DOTFILESHOME=$HOME/.dotfiles
export ZSHHOME=$DOTFILESHOME/zsh

# add things to PATH
paths=("$DOTFILESHOME/bin"
       "$HOME/.cargo/bin"
       "$HOME/.roswell/bin")

for p in $paths; do
    export PATH=${PATH}:${p}
done

# load plugins
for p in $ZSHHOME/plugins/*.sh; do
    source $p
done

# this needs to be loaded after all other plugins
source $ZSHHOME/plugins/zsh-syntax-highlighting/zsh-syntax-highlighting.plugin.zsh

# change some default highlighter values to fit with zenburn, and my
# preferences. may need to go to main-highlighter.zsh and uncomment the changes
# styles after an update.
: ${ZSH_HIGHLIGHT_STYLES[path]:=none}
: ${ZSH_HIGHLIGHT_STYLES[globbing]:=fg=none,bold}
: ${ZSH_HIGHLIGHT_STYLES[arg0]:=fg=151}
: ${ZSH_HIGHLIGHT_STYLES[reserved-word]:=fg=228}
: ${ZSH_HIGHLIGHT_STYLES[single-quoted-argument]:=fg=174}
: ${ZSH_HIGHLIGHT_STYLES[double-quoted-argument]:=fg=174}
: ${ZSH_HIGHLIGHT_STYLES[dollar-quoted-argument]:=fg=174}

# my default editor is emacsclient, the `em` scripts starts the daemon if it's
# not running
export EDITOR="em"

eval $(dircolors -b $DOTFILESHOME/dircolors)
eval $(keychain --eval --quiet --agents ssh \
                ~/.ssh/github \
                ~/.ssh/stuetop \
                ~/.ssh/termux)

source $ZSHHOME/keybindings.zsh
source $ZSHHOME/aliases.zsh
source $ZSHHOME/options.zsh
source $ZSHHOME/jens-theme.zsh

# save our command history
HISTSIZE=10000
SAVEHIST=10000
HISTFILE=~/.zsh_history

# load the auto completion system
autoload -Uz compinit
compinit

# show the selected item in the menu
zstyle ':completion:*' menu select
# setup an autocompletion style (case-insensitive)
zstyle ':completion:*' matcher-list '' 'm:{a-zA-Z}={A-Za-z}' 'r:|[._-]=* r:|=*' 'l:|=* r:|=*'

# make gpg happy
export GPG_TTY=$(tty)

# use direnv to allow directory specific exports
eval "$(direnv hook zsh)"

# uncomment to profile zsh
# zprof
